CREATE DATABASE INVENTORY1;
USE INVENTORY1;

OUTPUT:





CREATE TABLE SUPPLIER (
		SID CHAR (5) PRIMARY KEY,
		SNAME NVARCHAR (30) NOT NULL,
		SADDR NVARCHAR (40) NOT NULL,
		SCITY NVARCHAR (20) DEFAULT 'DELHI',
		SPHONE CHAR (10) UNIQUE,
		SMAIL NVARCHAR (50) UNIQUE);

SELECT * FROM SUPPLIER;

OUTPUT:




CREATE TABLE CUSTOMER (
		CID CHAR (5) PRIMARY KEY,
		CNAME NVARCHAR (30) NOT NULL,
		CADDR NVARCHAR (40) NOT NULL,
		CCITY NVARCHAR (20) NOT NULL,
		CPHONE CHAR (10) NOT NULL,
		CMAIL NVARCHAR (50) NOT NULL,
		DOB DATE CHECK (DOB < '1-JAN-2020'));

SELECT * FROM CUSTOMER;


INSERT INTO CUSTOMER
 VALUES('C0001','LOUKYA', '1-22 HOUSING BOARD', 'ANANTAPUR', '7898456783',      'LOUKYA234@GMAIL.COM', '09-12-1990');


OUTPUT:





	
CREATE TABLE PRODUCT (
		PID CHAR (5) PRIMARY KEY,
		PDESC NVARCHAR (50) NOT NULL,
		PRICE INT,
		CATEGORY NVARCHAR (40),
		SID CHAR (5) REFERENCES SUPPLIER (SID));

		SELECT *FROM PRODUCT;

OUTPUT:




CREATE TABLE ORDERS (
		OID CHAR (5) PRIMARY KEY,
		ODATE DATE,
		CID CHAR (5) REFERENCES CUSTOMER (CID),
		PID CHAR (5) REFERENCES PRODUCT (PID),
		OQTY INT);

SELECT * FROM ORDERS;

OUTPUT:




CREATE TABLE STOCK (
		PID CHAR (5) REFERENCES PRODUCT (PID),
		SQTY INT CHECK (SQTY > = 0),
		ROL INT CHECK (ROL > 0),
	  	MOQ INT CHECK (MOQ >= 5));

SELECT * FROM STOCK;

OUTPUT:




-------------EXTRACT PID, PDESC, CATEGORY, SNAME, SCITY---------



SELECT PRODUCT.PID, PDESC, CATEGORY, SNAME, SCITY
FROM PRODUCT
INNER JOIN SUPPLIER 
ON PRODUCT.SID = SUPPLIER.SID ;

OUTPUT:




--------------EXTRACT OID, ODATE, CNAME, CADDR, CPHONE, PDESC, PRICE, OQTY, AMOUNT--------------



SELECT ORDERS.OID, ODATE, CNAME, CADDR, CPHONE, 
	   PDESC, PRICE, OQTY, PRICE * OQTY AS 'AMOUNT'
FROM ORDERS
RIGHT JOIN CUSTOMER
ON ORDERS.CID = CUSTOMER.CID
LEFT JOIN PRODUCT
ON ORDERS.PID = PRODUCT.PID ;

OUTPUT:




-------------GENERATE A VIEW BILL(OID, ODATE, CNAME, CADDR, CPHONE, PDESC, PRICE, OQTY, AMOUNT)-------------


CREATE VIEW BILL
AS
SELECT ORDERS.OID, ODATE, CNAME, CADDR, CPHONE, 
	   PDESC, PRICE, OQTY, PRICE * OQTY AS 'AMOUNT'
FROM ORDERS
RIGHT JOIN CUSTOMER
ON ORDERS.CID = CUSTOMER.CID
LEFT JOIN PRODUCT
ON ORDERS.PID = PRODUCT.PID;

SELECT * FROM BILL;

OUTPUT:





----------ADDSUPPLIER (TO ADD DETAILS INTO 'SUPPLIER' TABLE AND DISPLAY THE DETAILS OF THE NEWLY ADDED SUPPLIER)---------


CREATE PROCEDURE ADDSUPPLIER
				 @SID AS CHAR (5),
				 @SNAME AS VARCHAR (20),
				 @SADDR AS VARCHAR (40),
				 @SCITY AS VARCHAR (20),
				 @SPHONE AS CHAR (10),
				 @SMAIL AS VARCHAR (50)
AS
BEGIN
	INSERT INTO SUPPLIER
	VALUES (@SID, @SNAME, @SADDR, @SCITY, @SPHONE, @SMAIL);

	SELECT * FROM SUPPLIER
	WHERE SUPPLIER.SID = @SID;

END;

ADDSUPPLIER 'S0001', 'KALYANI', '00-00 PWD GROUNDS', 'MYSORE', '8498920058', 'KR123@MAIL.COM';

OUTPUT:




--------ADDPRO(TO ADD DETAILS INTO 'PRODUCT' TABLE AND DISPLAY THE DETAILS OF THE NEWLY ADDED PRODUCT)--------


CREATE PROCEDURE ADDPRO
				 @PID AS CHAR (5),
				 @PDESC AS VARCHAR (40),
				 @PRICE AS INT,
				 @CATEGORY AS VARCHAR (30),
				 @SID AS CHAR (5)
AS
BEGIN
	INSERT INTO PRODUCT
	VALUES (@PID, @PDESC, @PRICE, @CATEGORY, @SID);

	SELECT * FROM PRODUCT
	WHERE PRODUCT.PID = @PID;

END;

ADDPRO 'P0001','NICE PRODUCT', '54321', 'ELECTRONICS', 'S0001';

OUTPUT:





-----------ADDCUST(TO ADD DETAILS INTO 'CUSTOMER' TABLE AND DISPLAY THE DETAILS OF THE NEWLY ADDED CUSTOMER) 



CREATE PROCEDURE ADDCUST
				 @CID AS CHAR (50),
				 @CNAME AS VARCHAR (30),
				 @CADDR AS VARCHAR (50),
				 @CCITY AS VARCHAR (20),
				 @CPHONE AS CHAR (10),
				 @CMAIL AS VARCHAR (50),
				 @DOB AS DATE
AS
BEGIN
	  INSERT INTO CUSTOMER
	  VALUES (@CID, @CNAME, @CADDR, @CCITY, @CPHONE, @CMAIL, @DOB);

	  SELECT * FROM CUSTOMER
	  WHERE CUSTOMER.CID = @CID;

END;

ADDCUST 'C0001', 'ADWAITHI', '5-41 BENZ CIRCLE', 'UDIPI', '987654310','ADS@GMAIL.COM', '09-09-2009';

OUTPUT:





----------ADDORDER(TO ADD DETAILS INTO 'ORDERS' TABLE AND DISPLAY THE DETAILS OF THE NEWLY ADDED ORDERS ODATE SHOULD BE GENERATED AUTOMATICALLY AS THE CURRENT DATE)



CREATE PROCEDURE ADDORDER
				 @OID AS CHAR (5),
				 @CID AS CHAR (5),
				 @PID AS CHAR (5),
				 @OQTY AS INT
AS
BEGIN
	
	DECLARE @ODATE DATE;
	SET @ODATE = GETDATE ();
	
	INSERT INTO ORDERS
	VALUES (@OID, @ODATE, @CID, @PID, @OQTY)

	SELECT * FROM ORDERS
	WHERE ORDERS.OID = @OID;

END;

ADDORDER 'O0001', 'C0001','P0001','13';

OUTPUT:





---- DROP ALL PROCEDURE TABLES -----



DROP PROCEDURE ADDSUPPLIER;
DROP PROCEDURE ADDPRO;
DROP PROCEDURE ADDCUST;
DROP PROCEDURE ADDORDER;

OUTPUT:




-----------CREATE FUNCTION FOR AUTOGENERATE 5-CHARACTER ALPHA NUMERIC ID------------


CREATE FUNCTION GENID (@C AS CHAR (1), @I AS INT)
RETURNS CHAR (5)
AS
BEGIN
		DECLARE @ID AS CHAR (5)

		SELECT @ID = CASE
				WHEN @I < 10 THEN CONCAT (@C, '000', @I)
				WHEN @I < 100 THEN CONCAT (@C, '00', @I)
				WHEN @I < 1000 THEN CONCAT (@C, '0', @I)
				WHEN @I < 10000 THEN CONCAT (@C, @I)
		END;
		RETURN @ID;
END;


-------------CREATE SEQUENCE AND RE-CREATE PROCEDURE FOR ALL TABLES------------

CREATE SEQUENCE SEQ1
AS INT
START WITH 2
INCREMENT BY 1;


----------ADDSUPPLIER (TO ADD DETAILS INTO 'SUPPLIER' TABLE AND DISPLAY THE DETAILS OF THE NEWLY ADDED SUPPLIER)---------

CREATE PROCEDURE ADDSUPPLIER
				 @SNAME AS VARCHAR (20),
				 @SADDR AS VARCHAR (40),
				 @SCITY AS VARCHAR (20),
				 @SPHONE AS CHAR (10),
				 @SMAIL AS VARCHAR (50)

AS
BEGIN
			DECLARE @I AS INT
			DECLARE @SID AS CHAR (5) ;

			SET @I = (NEXT VALUE FOR SEQ1)
			SELECT @SID = DBO.GENID ('S', @I);

			INSERT INTO SUPPLIER
			VALUES(@SID, @SNAME, @SADDR, @SCITY, @SPHONE, @SMAIL) ;

			SELECT * FROM SUPPLIER
END;


ADDSUPPLIER 'ADHIRA', '7/A NEKOLAS STREET', 'DELHI', '9095904850', 'ADHI77@GMAIL.COM';
ADDSUPPLIER 'AAKANKSHA', '20-3 PATAMATA', 'VIJAYAWADA', '8883339990', 'KANKSHA@GMAIL.COM';

OUTPUT:





--------ADDPRO(TO ADD DETAILS INTO 'PRODUCT' TABLE AND DISPLAY THE DETAILS OF THE NEWLY ADDED PRODUCT)--------



CREATE PROCEDURE ADDPRO
				 @PDESC AS VARCHAR (40),
				 @PRICE AS INT,
				 @CATEGORY AS VARCHAR (30),
				 @SID AS CHAR (5)
AS
BEGIN
			DECLARE @I AS INT
			DECLARE @PID AS CHAR (5);

			SET @I = (NEXT VALUE FOR SEQ1)
			SELECT @PID = DBO.GENID ('P', @I);

			INSERT INTO PRODUCT
			VALUES (@PID, @PDESC, @PRICE, @CATEGORY, @SID);

			SELECT * FROM PRODUCT
END;


ADDPRO 'UNIQUE FEATURES', '9999', 'HOME APPLIANCES', 'S0002';

OUTPUT:





-----------ADDCUST(TO ADD DETAILS INTO 'CUSTOMER' TABLE AND DISPLAY THE DETAILS OF THE NEWLY ADDED CUSTOMER) 



CREATE PROCEDURE ADDCUST
				 @CNAME AS VARCHAR (30),
				 @CADDR AS VARCHAR (50),
				 @CCITY AS VARCHAR (20),
				 @CPHONE AS CHAR (10),
				 @CMAIL AS VARCHAR (50),
				 @DOB AS DATE
AS
BEGIN

			DECLARE @I AS INT
			DECLARE @CID AS CHAR (5);

			SET @I = (NEXT VALUE FOR SEQ1)
			SELECT @CID = DBO.GENID ('C', @I);


			INSERT INTO CUSTOMER
			VALUES (@CID, @CNAME, @CADDR, @CCITY, @CPHONE, @CMAIL, @DOB);

			SELECT * FROM CUSTOMER
	
END;

ADDCUST 'ADITHI', '3-33 NEHRU ROAD', 'CHENNAI', '9878934556', 'ADITHI22@GMAIL.COM', '12-12-2012';

OUTPUT:





----------ADDORDER(TO ADD DETAILS INTO 'ORDERS' TABLE AND DISPLAY THE DETAILS OF THE NEWLY ADDED ORDERS ODATE SHOULD BE GENERATED AUTOMATICALLY AS THE CURRENT DATE)-----------



CREATE PROCEDURE ADDORDER
				 @CID AS CHAR (5),
				 @PID AS CHAR (5),
				 @OQTY AS INT
AS
BEGIN	
			DECLARE @I AS INT
			DECLARE @OID AS CHAR (5);

			DECLARE @ODATE DATE;
			SET @ODATE = GETDATE ();

			SET @I = (NEXT VALUE FOR SEQ1)
			SELECT @OID = DBO.GENID ('O', @I);
	

			INSERT INTO ORDERS
			VALUES (@OID, @ODATE, @CID, @PID, @OQTY)

			SELECT * FROM ORDERS;

END;

ADDORDER 'C0002', 'P0002', '14';

OUTPUT:





SELECT * FROM SUPPLIER;
SELECT * FROM CUSTOMER;
SELECT * FROM PRODUCT;
SELECT * FROM ORDERS;
SELECT * FROM STOCK;






OUTPUT FOR ALL TABLES:




 C1_SQL_CAPSTONE1_KALYANI



                                                                                CAPSTONE-1

                                                                     INVENTORY1  STRUCTURE
A.KALYANI                                                                                                                                        MAIL:kalyanireddy2492@gmail.com



